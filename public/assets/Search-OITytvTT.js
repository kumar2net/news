import{g as Z,a as ee,r as d,u as te,j as e,s as re,c as se,d as oe,e as ne,m as Ce,l as Ie,n as F,S as b,P as V,T as l,h as M,k as B,D as Fe,C as Re,o as Ae}from"./index-BvjRrxQ6.js";import{u as Ee,f as ze,O as He,F as Le,I as _e,a as $e,S as De,b as ke}from"./Select-D4wFXJxD.js";import{c as qe,A as Be,G as Y,C as Me,a as Ue,b as We}from"./Grid-DDopuh-h.js";import{L as Ne}from"./Link-Ddcuc3rQ.js";function Oe(t){return ee("MuiFormHelperText",t)}const Q=Z("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var X;const Ge=t=>{const{classes:r,contained:n,size:c,disabled:m,error:p,filled:x,focused:f,required:u}=t,v={root:["root",m&&"disabled",p&&"error",c&&`size${oe(c)}`,n&&"contained",f&&"focused",x&&"filled",u&&"required"]};return ne(v,Oe,r)},Je=re("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(t,r)=>{const{ownerState:n}=t;return[r.root,n.size&&r[`size${oe(n.size)}`],n.contained&&r.contained,n.filled&&r.filled]}})(Ce(({theme:t})=>({color:(t.vars||t).palette.text.secondary,...t.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${Q.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${Q.error}`]:{color:(t.vars||t).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:r})=>r.contained,style:{marginLeft:14,marginRight:14}}]}))),Ke=d.forwardRef(function(r,n){const c=te({props:r,name:"MuiFormHelperText"}),{children:m,className:p,component:x="p",disabled:f,error:u,filled:v,focused:S,margin:g,required:z,variant:I,...j}=c,s=Ee(),o=ze({props:c,muiFormControl:s,states:["variant","size","disabled","error","filled","focused","required"]}),a={...c,component:x,contained:o.variant==="filled"||o.variant==="outlined",variant:o.variant,size:o.size,disabled:o.disabled,error:o.error,filled:o.filled,focused:o.focused,required:o.required};delete a.ownerState;const H=Ge(a);return e.jsx(Je,{as:x,className:se(H.root,p),ref:n,...j,ownerState:a,children:m===" "?X||(X=e.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"})):m})});function Ve(t){return ee("MuiTextField",t)}Z("MuiTextField",["root"]);const Ye={standard:_e,filled:Le,outlined:He},Qe=t=>{const{classes:r}=t;return ne({root:["root"]},Ve,r)},Xe=re(ke,{name:"MuiTextField",slot:"Root"})({}),Ze=d.forwardRef(function(r,n){const c=te({props:r,name:"MuiTextField"}),{autoComplete:m,autoFocus:p=!1,children:x,className:f,color:u="primary",defaultValue:v,disabled:S=!1,error:g=!1,FormHelperTextProps:z,fullWidth:I=!1,helperText:j,id:s,InputLabelProps:o,inputProps:a,InputProps:H,inputRef:_,label:i,maxRows:y,minRows:R,multiline:h=!1,name:W,onBlur:w,onChange:A,onFocus:ie,placeholder:ae,required:N=!1,rows:le,select:$=!1,SelectProps:D,slots:O={},slotProps:ce={},type:de,value:G,variant:L="outlined",...pe}=c,T={...c,autoFocus:p,color:u,disabled:S,error:g,fullWidth:I,multiline:h,required:N,select:$,variant:L},ue=Qe(T),P=Ie(s),k=j&&P?`${P}-helper-text`:void 0,J=i&&P?`${P}-label`:void 0,me=Ye[L],C={slots:O,slotProps:{input:H,inputLabel:o,htmlInput:a,formHelperText:z,select:D,...ce}},E={},q=C.slotProps.inputLabel;L==="outlined"&&(q&&typeof q.shrink<"u"&&(E.notched=q.shrink),E.label=i),$&&((!D||!D.native)&&(E.id=void 0),E["aria-describedby"]=void 0);const[xe,fe]=F("root",{elementType:Xe,shouldForwardComponentProp:!0,externalForwardedProps:{...C,...pe},ownerState:T,className:se(ue.root,f),ref:n,additionalProps:{disabled:S,error:g,fullWidth:I,required:N,color:u,variant:L}}),[he,ge]=F("input",{elementType:me,externalForwardedProps:C,additionalProps:E,ownerState:T}),[ye,be]=F("inputLabel",{elementType:$e,externalForwardedProps:C,ownerState:T}),[ve,Se]=F("htmlInput",{elementType:"input",externalForwardedProps:C,ownerState:T}),[je,we]=F("formHelperText",{elementType:Ke,externalForwardedProps:C,ownerState:T}),[Te,Pe]=F("select",{elementType:De,externalForwardedProps:C,ownerState:T}),K=e.jsx(he,{"aria-describedby":k,autoComplete:m,autoFocus:p,defaultValue:v,fullWidth:I,multiline:h,name:W,rows:le,maxRows:y,minRows:R,type:de,value:G,id:P,inputRef:_,onBlur:w,onChange:A,onFocus:ie,placeholder:ae,inputProps:Se,slots:{input:O.htmlInput?ve:void 0},...ge});return e.jsxs(xe,{...fe,children:[i!=null&&i!==""&&e.jsx(ye,{htmlFor:P,id:J,...be,children:i}),$?e.jsx(Te,{"aria-describedby":k,id:P,labelId:J,value:G,input:K,...Pe,children:x}):K,j&&e.jsx(je,{id:k,...we,children:j})]})}),et={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},tt="/api",U="news_topics",rt=()=>{if(typeof window>"u")return[];try{const t=window.localStorage.getItem(U);if(!t)return[];const r=JSON.parse(t);return Array.isArray(r)?r.filter(n=>typeof n=="string"):[]}catch{return[]}},st=t=>{if(!t)return"Just in";try{return new Intl.DateTimeFormat("en",{dateStyle:"medium",timeStyle:"short"}).format(new Date(t))}catch{return"Just in"}};function ot(){const t=d.useRef(rt()),[r,n]=d.useState(t.current),[c,m]=d.useState(()=>t.current.join(", ")),[p,x]=d.useState([]),[f,u]=d.useState("idle"),[v,S]=d.useState(null),g=d.useMemo(()=>{try{const o=et?.VITE_NEWS_API_KEY;return typeof o=="string"&&o.length>0?o:void 0}catch{return}},[]);d.useEffect(()=>{typeof window<"u"&&(r.length?window.localStorage.setItem(U,JSON.stringify(r)):window.localStorage.removeItem(U))},[r]),d.useEffect(()=>{if(!r.length){x([]),u("idle"),S(null);return}const s=new AbortController;return(async()=>{u("loading"),S(null);try{const a=r.map(async i=>{const y=new URLSearchParams({q:i,language:"en",sortBy:"publishedAt",pageSize:"5"}),R=g&&g.length>0?`https://newsapi.org/v2/everything?${y.toString()}&apiKey=${g}`:`${tt}/search-news?${y.toString()}`,h=await fetch(R,{signal:s.signal});if(!(h.headers.get("content-type")??"").includes("application/json")){const A=await h.text();throw new Error(A.slice(0,120)||`Failed to load “${i}”`)}const w=await h.json();if(!h.ok){const A=w&&(w.error||w.message)||`Failed to load “${i}”`;throw new Error(A)}return Array.isArray(w.articles)?w.articles:[]}),_=(await Promise.all(a)).flat().filter(i=>!!(i&&i.url)).filter((i,y,R)=>R.findIndex(h=>h.url===i.url)===y).sort((i,y)=>new Date(y.publishedAt??0).getTime()-new Date(i.publishedAt??0).getTime());x(_),u("success")}catch(a){if(a?.name==="AbortError")return;S(a?.message||"Unexpected error"),u("error")}})(),()=>s.abort()},[r,g]);const z=s=>{s.preventDefault();const o=c.split(",").map(a=>a.trim()).filter(Boolean);n(o)},I=s=>{n(o=>o.filter(a=>a!==s))},j=()=>{n([]),m("")};return e.jsxs(b,{spacing:6,children:[e.jsxs(V,{variant:"outlined",sx:{px:{xs:3,md:4},py:{xs:3,md:4},borderRadius:4},children:[e.jsx(l,{variant:"h4",fontWeight:600,gutterBottom:!0,children:"Build a tailored briefing"}),e.jsx(l,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"Separate topics with commas. We will fetch the five freshest stories for each topic and blend them into one stream."}),e.jsxs(M,{component:"form",onSubmit:z,sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[e.jsx(Ze,{value:c,onChange:s=>m(s.target.value),label:"Topics",placeholder:"gen ai, pixel, mac os",fullWidth:!0}),e.jsx(B,{type:"submit",variant:"contained",size:"large",sx:{alignSelf:{xs:"stretch",sm:"center"},minWidth:{sm:140}},children:"Run search"})]}),r.length>0&&e.jsxs(b,{direction:"row",spacing:1,alignItems:"center",flexWrap:"wrap",sx:{mt:2},children:[r.map(s=>e.jsx(qe,{label:s,onDelete:()=>I(s),color:"primary",variant:"outlined",sx:{textTransform:"capitalize"}},s)),e.jsx(B,{size:"small",onClick:j,children:"Clear all"})]}),e.jsx(Fe,{sx:{my:3}}),e.jsxs(b,{spacing:1,children:[e.jsx(l,{variant:"subtitle1",fontWeight:600,children:"Tips"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"Combine broad and niche topics for balanced coverage. Remove a chip to refocus if results feel noisy."})]})]}),e.jsxs(M,{children:[f==="idle"&&e.jsx(V,{variant:"outlined",sx:{py:6,px:3,textAlign:"center",borderRadius:4,color:"text.secondary"},children:"Start curating by entering a few topics above."}),f==="loading"&&e.jsxs(b,{alignItems:"center",spacing:2,children:[e.jsx(Re,{}),e.jsx(l,{color:"text.secondary",children:"Collecting the latest stories…"})]}),f==="error"&&v&&e.jsx(Be,{severity:"error",children:v}),f==="success"&&e.jsxs(e.Fragment,{children:[e.jsx(l,{variant:"h6",sx:{mb:2},children:p.length>0?`Curated stream (${p.length} articles)`:"No articles found for your topics"}),e.jsx(Y,{container:!0,spacing:3,children:p.map(s=>e.jsx(Y,{size:{xs:12,md:6},children:e.jsxs(Me,{variant:"outlined",sx:{display:"flex",flexDirection:"column",height:"100%",borderRadius:3},children:[e.jsx(Ue,{sx:{flexGrow:1},children:e.jsxs(b,{spacing:1.5,children:[e.jsx(l,{variant:"overline",color:"text.secondary",children:s.source?.name??"Unknown source"}),e.jsx(l,{variant:"h6",children:s.title}),s.description&&e.jsx(l,{variant:"body2",color:"text.secondary",children:s.description}),e.jsx(l,{variant:"caption",color:"text.secondary",children:st(s.publishedAt)})]})}),e.jsx(We,{sx:{px:3,pb:3},children:e.jsx(B,{component:Ne,href:s.url,target:"_blank",rel:"noopener",variant:"outlined",children:"Read article"})})]})},s.url))})]})]})]})}function ct(){return e.jsxs(b,{spacing:5,children:[e.jsx(M,{sx:{borderRadius:4,px:{xs:3,md:5},py:{xs:4,md:6},background:"linear-gradient(135deg, rgba(14,116,144,0.16) 0%, rgba(59,130,246,0.2) 100%)",border:t=>`1px solid ${t.palette.divider}`},children:e.jsxs(b,{spacing:2,maxWidth:600,children:[e.jsxs(b,{direction:"row",spacing:1.5,alignItems:"center",children:[e.jsx(Ae,{color:"primary"}),e.jsx(l,{variant:"overline",color:"text.secondary",children:"Curate your take"})]}),e.jsx(l,{variant:"h3",fontWeight:800,sx:{letterSpacing:"-0.02em"},children:"Spin up a bespoke news briefing"}),e.jsx(l,{variant:"body1",color:"text.secondary",children:"Combine any mix of topics—from climate and AI to culture—and we will hydrate your feed with the freshest reporting."})]})}),e.jsx(ot,{})]})}export{ct as default};
